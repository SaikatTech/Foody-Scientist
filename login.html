<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2>Login with Phone</h2>

<input id="phone" placeholder="+91XXXXXXXXXX">
<button id="send">Send OTP</button>

<br><br>

<input id="otp" placeholder="Enter OTP">
<button id="verify">Verify</button>

<div id="recaptcha-container"></div>

<script type="module">
import { sendOTP } from "./js/auth.js";
import { saveLoginTime } from "./js/session.js";

let confirmation;

document.getElementById("send").onclick = async () => {
  const phone = document.getElementById("phone").value;
  confirmation = await sendOTP(phone);
  alert("OTP sent");
};

document.getElementById("verify").onclick = async () => {
  const otp = document.getElementById("otp").value;
  await confirmation.confirm(otp);
  saveLoginTime();
  window.location.href = "/";
};
</script>

</body>
</html>
